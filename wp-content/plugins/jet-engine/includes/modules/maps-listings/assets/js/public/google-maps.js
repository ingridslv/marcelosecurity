(()=>{function t(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,n,s,r,a=[],h=!0,p=!1;try{if(s=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;h=!1}else for(;!(h=(o=s.call(i)).done)&&(a.push(o.value),a.length!==e);h=!0);}catch(t){p=!0,n=t}finally{try{if(!h&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(p)throw n}}return a}}(t,i)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,i):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"//www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.closeBoxTitle_=t.closeBoxTitle||" Close ",this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),void 0===t.visible&&(void 0===t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}o.prototype=new google.maps.OverlayView,o.prototype.addEventListener=function(t,e,i,o){return o=o||!1,t.addEventListener(e,i,o),{target:t,type:e,handler:i,useCapture:o}},o.prototype.removeEventListener=function(t){t.target.removeEventListener(t.type,t.handler,t.useCapture)},o.prototype.createJetGMInfoBoxDiv_=function(){var t,e,i,o=this,n=["A","BUTTON","INPUT","TEXTAREA"],s=function(t){"click"===t.type&&t.currentTarget.querySelector(".jet-engine-listing-overlay-wrap")||"click"===t.type&&n.includes(t.target.tagName)||(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),void 0===this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_?(this.div_.style.width=this.maxWidth_+"px",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(this.addEventListener(this.div_,e[t],s));this.eventListeners_.push(this.addEventListener(this.div_,"mouseover",function(t){this.style.cursor="default"}))}this.contextListener_=this.addEventListener(this.div_,"contextmenu",function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),o.enableEventPropagation_||s(t)}),google.maps.event.trigger(this,"domready")}},o.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" title='"+this.closeBoxTitle_+"'",t+=" class='jet-map-close'",t+=" style='",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},o.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=this.addEventListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},o.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},o.prototype.panBox_=function(t){var e,i=0,o=0;if(!t&&(e=this.getMap())instanceof google.maps.Map){e.getBounds().contains(this.position_)||e.setCenter(this.position_);var n=this.pixelOffset_.width,s=this.pixelOffset_.height,r=this.div_.offsetWidth,a=this.div_.offsetHeight,h=this.infoBoxClearance_.width,p=this.infoBoxClearance_.height;if(2==e.panToBounds.length){var d={left:0,right:0,top:0,bottom:0};d.left=-n+h,d.right=n+r+h,this.alignBottom_?(d.top=-s+p+a,d.bottom=s+p):(d.top=-s+p,d.bottom=s+a+p),e.panToBounds(new google.maps.LatLngBounds(this.position_),d)}else{var l=e.getDiv(),g=l.offsetWidth,c=l.offsetHeight,u=this.getProjection().fromLatLngToContainerPixel(this.position_);u.x<-n+h?i=u.x+n-h:u.x+r+n+h>g&&(i=u.x+r+n+h-g),this.alignBottom_?u.y<-s+p+a?o=u.y+s-p-a:u.y+s+p>c&&(o=u.y+s+p-c):u.y<-s+p?o=u.y+s-p:u.y+a+s+p>c&&(o=u.y+a+s+p-c),(0!==i||0!==o)&&(e.getCenter(),e.panBy(i,o))}}},o.prototype.setBoxStyle_=function(){var t,e;if(this.div_){for(t in this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);(void 0===this.div_.style.WebkitTransform||-1===this.div_.style.WebkitTransform.indexOf("translateZ")&&-1===this.div_.style.WebkitTransform.indexOf("matrix"))&&(this.div_.style.WebkitTransform="translateZ(0)"),void 0!==this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},o.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},i=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=i.ownerDocument.defaultView.getComputedStyle(i,""))&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0):document.documentElement.currentStyle&&i.currentStyle&&(e.top=parseInt(i.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(i.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(i.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(i.currentStyle.borderRightWidth,10)||0),e},o.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},o.prototype.draw=function(){this.createJetGMInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},o.prototype.setOptions=function(t){void 0!==t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),void 0!==t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),void 0!==t.content&&this.setContent(t.content),void 0!==t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),void 0!==t.maxWidth&&(this.maxWidth_=t.maxWidth),void 0!==t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),void 0!==t.alignBottom&&(this.alignBottom_=t.alignBottom),void 0!==t.position&&this.setPosition(t.position),void 0!==t.zIndex&&this.setZIndex(t.zIndex),void 0!==t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),void 0!==t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),void 0!==t.closeBoxTitle&&(this.closeBoxTitle_=t.closeBoxTitle),void 0!==t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),void 0!==t.isHidden&&(this.isHidden_=t.isHidden),void 0!==t.visible&&(this.isHidden_=!t.visible),void 0!==t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},o.prototype.contentIsSet=function(){return""!==this.content_},o.prototype.setContent=function(t){if(void 0===t.nodeType){var e=document.createElement("div");e.innerHTML=t,t=e}this.content_=t,this.div_&&(this.closeListener_&&(this.removeEventListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),void 0===t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px",void 0===t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},o.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},o.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},o.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},o.prototype.getContent=function(){return this.content_},o.prototype.getPosition=function(){return this.position_},o.prototype.getZIndex=function(){return this.zIndex_},o.prototype.getVisible=function(){return void 0!==this.getMap()&&null!==this.getMap()&&!this.isHidden_},o.prototype.getWidth=function(){var t=null;return this.div_&&(t=this.div_.offsetWidth),t},o.prototype.getHeight=function(){var t=null;return this.div_&&(t=this.div_.offsetHeight),t},o.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},o.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},o.prototype.open=function(t,e){var i=this;e&&(this.setPosition(e.getPosition()),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){i.setPosition(this.getPosition())})),this.setMap(t),t.jeActiveInfoWindow=this,this.div_&&(window.dispatchEvent(new CustomEvent("jet-engine/maps/google/info-box-open",{detail:{container:this.div_}})),this.panBox_(this.disableAutoPan_))},o.prototype.close=function(){var t,e;if(this.closeListener_&&(this.removeEventListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(e=0;e<this.eventListeners_.length;e++)this.removeEventListener(this.eventListeners_[e]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(this.removeEventListener(this.contextListener_),this.contextListener_=null),null!==(t=this.map)&&void 0!==t&&t.jeActiveInfoWindow&&(this.map.jeActiveInfoWindow=!1),this.setMap(null)},function(){function t(t){var i=t||{};this.ready_=!1,this.dragging_=!1,null==t.visible&&(t.visible=!0),null==t.shadow&&(t.shadow="7px -3px 5px rgba(88,88,88,0.7)"),null==t.anchor&&(t.anchor=e.BOTTOM),this.setValues(i)}t.prototype=new google.maps.OverlayView,window.RichMarker=t,t.prototype.getVisible=function(){return this.get("visible")},t.prototype.getVisible=t.prototype.getVisible,t.prototype.setVisible=function(t){this.set("visible",t)},t.prototype.setVisible=t.prototype.setVisible,t.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())},t.prototype.visible_changed=t.prototype.visible_changed,t.prototype.setFlat=function(t){this.set("flat",!!t)},t.prototype.setFlat=t.prototype.setFlat,t.prototype.getFlat=function(){return this.get("flat")},t.prototype.getFlat=t.prototype.getFlat,t.prototype.getWidth=function(){return this.get("width")},t.prototype.getWidth=t.prototype.getWidth,t.prototype.getHeight=function(){return this.get("height")},t.prototype.getHeight=t.prototype.getHeight,t.prototype.setShadow=function(t){this.set("shadow",t),this.flat_changed()},t.prototype.setShadow=t.prototype.setShadow,t.prototype.getShadow=function(){return this.get("shadow")},t.prototype.getShadow=t.prototype.getShadow,t.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())},t.prototype.flat_changed=t.prototype.flat_changed,t.prototype.setZIndex=function(t){this.set("zIndex",t)},t.prototype.setZIndex=t.prototype.setZIndex,t.prototype.getZIndex=function(){return this.get("zIndex")},t.prototype.getZIndex=t.prototype.getZIndex,t.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},t.prototype.zIndex_changed=t.prototype.zIndex_changed,t.prototype.getDraggable=function(){return this.get("draggable")},t.prototype.getDraggable=t.prototype.getDraggable,t.prototype.setDraggable=function(t){this.set("draggable",!!t)},t.prototype.setDraggable=t.prototype.setDraggable,t.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},t.prototype.draggable_changed=t.prototype.draggable_changed,t.prototype.getPosition=function(){return this.get("position")},t.prototype.getPosition=t.prototype.getPosition,t.prototype.setPosition=function(t){this.set("position",t)},t.prototype.setPosition=t.prototype.setPosition,t.prototype.position_changed=function(){this.draw()},t.prototype.position_changed=t.prototype.position_changed,t.prototype.getAnchor=function(){return this.get("anchor")},t.prototype.getAnchor=t.prototype.getAnchor,t.prototype.setAnchor=function(t){this.set("anchor",t)},t.prototype.setAnchor=t.prototype.setAnchor,t.prototype.anchor_changed=function(){this.draw()},t.prototype.anchor_changed=t.prototype.anchor_changed,t.prototype.htmlToDocumentFragment_=function(t){var e=document.createElement("DIV");if(e.innerHTML=t,1==e.childNodes.length)return e.removeChild(e.firstChild);for(var i=document.createDocumentFragment();e.firstChild;)i.appendChild(e.firstChild);return i},t.prototype.removeChildren_=function(t){if(t)for(var e;e=t.firstChild;)t.removeChild(e)},t.prototype.setContent=function(t){this.set("content",t)},t.prototype.setContent=t.prototype.setContent,t.prototype.getContent=function(){return this.get("content")},t.prototype.getContent=t.prototype.getContent,t.prototype.addEventListener=function(t,e,i,o){return o=o||!1,t.addEventListener(e,i,o),{target:t,type:e,handler:i,useCapture:o}},t.prototype.removeEventListener=function(t){t.target.removeEventListener(t.type,t.handler,t.useCapture)},t.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var t=this.getContent();if(t){"string"==typeof t&&(t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),t=this.htmlToDocumentFragment_(t)),this.markerContent_.appendChild(t);for(var e,i=this,o=this.markerContent_.getElementsByTagName("IMG"),n=0;e=o[n];n++)this.addEventListener(e,"mousedown",function(t){i.getDraggable()&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1,console.log("image mousedown"))}),this.addEventListener(e,"load",function(){i.draw(),console.log("image load")});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}},t.prototype.content_changed=t.prototype.content_changed,t.prototype.setCursor_=function(t){if(this.ready_){var e="";-1!==navigator.userAgent.indexOf("Gecko/")?("dragging"==t&&(e="-moz-grabbing"),"dragready"==t&&(e="-moz-grab"),"draggable"==t&&(e="pointer")):("dragging"!=t&&"dragready"!=t||(e="move"),"draggable"==t&&(e="pointer")),this.markerWrapper_.style.cursor!=e&&(this.markerWrapper_.style.cursor=e)}},t.prototype.startDrag=function(t){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var e=this.getMap();this.mapDraggable_=e.get("draggable"),e.set("draggable",!1),this.mouseX_=t.clientX,this.mouseY_=t.clientY,this.setCursor_("dragready"),this.markerWrapper_.style.MozUserSelect="none",this.markerWrapper_.style.KhtmlUserSelect="none",this.markerWrapper_.style.WebkitUserSelect="none",this.markerWrapper_.unselectable="on",this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,"dragstart")}},t.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())},t.prototype.drag=function(t){if(this.getDraggable()&&this.dragging_){var e=this.mouseX_-t.clientX,i=this.mouseY_-t.clientY;this.mouseX_=t.clientX,this.mouseY_=t.clientY;var o=parseInt(this.markerWrapper_.style.left,10)-e,n=parseInt(this.markerWrapper_.style.top,10)-i;this.markerWrapper_.style.left=o+"px",this.markerWrapper_.style.top=n+"px";var s=this.getOffset_(),r=new google.maps.Point(o-s.width,n-s.height),a=this.getProjection();this.setPosition(a.fromDivPixelToLatLng(r)),this.setCursor_("dragging"),google.maps.event.trigger(this,"drag")}else this.stopDrag()},t.prototype.removeDragListeners_=function(){this.draggableListener_&&(this.removeEventListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_("")},t.prototype.addDragging_=function(t){if(t){var e=this;this.draggableListener_=this.addEventListener(t,"mousedown",function(t){e.startDrag(t),console.log("node mousedown")}),this.setCursor_("draggable")}},t.prototype.addDraggingListeners_=function(){var t=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[this.addEventListener(this.markerWrapper_,"mousemove",function(e){t.drag(e)},!0),this.addEventListener(this.markerWrapper_,"mouseup",function(){t.stopDrag(),t.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[this.addEventListener(window,"mousemove",function(e){t.drag(e)},!0),this.addEventListener(window,"mouseup",function(){t.stopDrag()},!0)]},t.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var t,e=0;t=this.draggingListeners_[e];e++)this.removeEventListener(t);this.draggingListeners_.length=0}},t.prototype.getOffset_=function(){var t=this.getAnchor();if("object"==i(t))return t;var o=new google.maps.Size(0,0);if(!this.markerContent_)return o;var n=this.markerContent_.offsetWidth,s=this.markerContent_.offsetHeight;switch(t){case e.TOP_LEFT:break;case e.TOP:o.width=-n/2;break;case e.TOP_RIGHT:o.width=-n;break;case e.LEFT:o.height=-s/2;break;case e.MIDDLE:o.width=-n/2,o.height=-s/2;break;case e.RIGHT:o.width=-n,o.height=-s/2;break;case e.BOTTOM_LEFT:o.height=-s;break;case e.BOTTOM:o.width=-n/2,o.height=-s;break;case e.BOTTOM_RIGHT:o.width=-n,o.height=-s}return o},t.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute"),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?"":"none",!this.markerContent_){this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_);var t=this;this.addEventListener(this.markerContent_,"click",function(e){google.maps.event.trigger(t,"click",e)}),this.addEventListener(this.markerContent_,"mouseover",function(e){google.maps.event.trigger(t,"mouseover",e)}),this.addEventListener(this.markerContent_,"mouseout",function(e){google.maps.event.trigger(t,"mouseout",e)})}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,"ready")},t.prototype.onAdd=t.prototype.onAdd,t.prototype.draw=function(){if(this.ready_&&!this.dragging_){var t=this.getProjection();if(t){var e=this.get("position"),i=t.fromLatLngToDivPixel(e),o=this.getOffset_();this.markerWrapper_.style.top=i.y+o.height+"px",this.markerWrapper_.style.left=i.x+o.width+"px";var n=this.markerContent_.offsetHeight,s=this.markerContent_.offsetWidth;s!=this.get("width")&&this.set("width",s),n!=this.get("height")&&this.set("height",n)}}},t.prototype.draw=t.prototype.draw,t.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},t.prototype.onRemove=t.prototype.onRemove;var e={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=e}(),window.JetEngineMapsProvider=function(){this.getId=function(){return"google"},this.getContainer=function(t){return t.getDiv()},this.getBoundsJSON=function(t){var e=t.getBounds();if(e)return e.toJSON()},this.updateSyncBounds=function(){var t=this.getBounds();t&&window.JetEngineMaps.dispatchMapSyncEvent(this,t.toJSON())},this.initSync=function(t){null!=t&&t.isJetEngineSyncInited||!window.JetEngineMaps||!window.JetSmartFilters||(t.addListener("dragend",this.updateSyncBounds),t.addListener("bounds_changed",this.updateSyncBounds),google.maps.event.addListenerOnce(t,"idle",function(){window.JetEngineMaps.dispatchMapSyncInitEvent(t)}),t.isJetEngineSyncInited=!0)},this.initMap=function(t,e){(e=e||{}).mapTypeId||(e.mapTypeId=google.maps.MapTypeId.ROADMAP);var i=new google.maps.Map(t,e);return this.initSync(i),i.addListener("click",function(t){if(t.placeId&&i.jeActiveInfoWindow){var e,o,n=null===(e=t.domEvent)||void 0===e?void 0:e.screenX,s=null===(o=t.domEvent)||void 0===o?void 0:o.screenY;if(!n||!s)return;var r=i.jeActiveInfoWindow.div_.getBoundingClientRect();n>=r.left&&n<=r.right&&s>=r.top&&s<=r.bottom&&t.stop()}}),i},this.initBounds=function(){return new google.maps.LatLngBounds},this.fitMapBounds=function(t,e){var i=this;t.map.fitBounds(t.bounds);var o=google.maps.event.addListener(t.map,"idle",function(){var n,s;t.marker.getMap()?e&&e():(null!==(s=(n=t.marker).fitMapToMarkerTries)&&void 0!==s||(n.fitMapToMarkerTries=0),t.marker.fitMapToMarkerTries++,t.marker.fitMapToMarkerTries<3?i.fitMapToMarker(t.marker,t.markersClusterer):t.marker.fitMapToMarkerTries=0),google.maps.event.removeListener(o)})},this.addMarker=function(t){return t.position=new google.maps.LatLng(t.position.lat,t.position.lng),new RichMarker(t)},this.removeMarker=function(t){t.setMap(null)},this.addPopup=function(t){return new o({position:new google.maps.LatLng(t.position.lat,t.position.lng),maxWidth:t.width,boxClass:"jet-map-box",zIndex:null,pixelOffset:new google.maps.Size(0-t.width/2,0-t.offset),alignBottom:!0,infoBoxClearance:new google.maps.Size(10,10),pane:"floatPane",enableEventPropagation:!1})},this.markerOnClick=function(t,e,i){var o=this;(e=e||{}).map=t,e.shadow=!1,google.maps.event.addListener(t,"click",function(t){e.position={lat:t.latLng.lat(),lng:t.latLng.lng()},i&&i(o.addMarker(e))})},this.closePopup=function(t,e){google.maps.event.addListener(t,"closeclick",function(t){e(t)})},this.openPopup=function(t,e,i,o,n){google.maps.event.addListener(t,"click",function(t){o.isInternalInteraction=!0,e(t)}),"hover"===n&&google.maps.event.addListener(t,"mouseover",function(t){o.isInternalInteraction=!0,e(t)})},this.triggerOpenPopup=function(t){google.maps.event.trigger(t,"click")},this.getMarkerPosition=function(t,e){return(e=e||!1)?t.position.toJSON():t.position},this.getMarkerCluster=function(e){var i={imagePath:e.clustererImg};if(Array.isArray(e.customClusterImg||!1)){for(var o=[],n=MarkerClusterer.IMAGE_SIZES,s=0;s<e.customClusterImg.length;s++){var r,a=e.customClusterImg[s],h=a.width||n[s]||n[0],p={url:a.url,height:h,width:h},d=["custom-cluster","custom-cluster-"+s];null!=a&&null!==(r=a.classes)&&void 0!==r&&r.length&&(d=d.concat(a.classes)),p.className=d.join(" "),o.push(MarkerClusterer.withDefaultStyle(p))}i.styles=o}for(var l=0,g=Object.entries({maxZoom:"clusterMaxZoom",gridSize:"clusterRadius"});l<g.length;l++){var c=t(g[l],2),u=c[0],_=c[1];void 0!==e[_]&&""!==e[_]&&(i[u]=e[_])}return new MarkerClusterer(e.map,e.markers,i)},this.addMarkers=function(t,e){t.addMarkers(e)},this.removeMarkers=function(t,e){t.removeMarkers(e)},this.setCenterByPosition=function(t){t.map.setCenter(t.position),t.map.setZoom(t.zoom)},this.setAutoCenter=function(t){if(t.map.isInternalInteraction=!0,t.map.fitBounds(t.bounds),t.settings.maxZoom)var e=google.maps.event.addListener(t.map,"idle",function(){t.map.getZoom()>t.settings.maxZoom&&t.map.setZoom(t.settings.maxZoom),google.maps.event.removeListener(e)})},this.getMarkerMap=function(t){return t.getMap()},this.fitMapToMarker=function(t,e,i){var o,n,s=this,r=this._findClusterByMarker(e,t);r&&(n=e.getMap(),o=r.getBounds(),this.fitMapBounds({map:n,bounds:o,marker:t,markersClusterer:e},function(){s.panTo({map:n,position:s.getMarkerPosition(t),zoom:i})}))},this.panTo=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.map.panTo(t.position),(e||t.zoom&&t.zoom>t.map.getZoom())&&t.map.setZoom(t.zoom)},this._findClusterByMarker=function(t,e){var i,o=t.getClusters();if(o.length){for(var n=0;n<o.length;n++)for(var s=o[n].getMarkers(),r=0;r<s.length;r++)if(s[r]===e&&s.length>1){i=o[n];break}return i}}}})();